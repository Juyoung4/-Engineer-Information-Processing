### 3-3 논리 데이터베이스 설계
* 관계 데이터 모델(Edgar.F.Codd)
    - relation = schema(attribute + domain + degree) + instance(tuple + cardinarlity)
        * instance(동적 성질,Extension(외연)성질 가짐), schema(정적 성질, intension(내포)성질 가짐)
    - relation 특징
        + 속성은 단일 값(원자 값)을 가지고 서로 다른 이름을 가진다
        + 한 속성의 값은 모두 같은 도메인 값을 가진다
        + 속성과 튜플 각각 순서가 달라도 상관없다
        + 중복된 튜플은 허용하지 않는다
    - 무결성 제약 조건[데이터의 일관성+정확성+유효성 유지] -> DBMS의 기능(무결성 강화)
        1. 도메인 무결성(도메인 제약)
            - tuple들이 각 속성의 도메인에 지정된 값만 가져야함 -> 제약대상:속성
            - 제약 조건: CHECK, [NOT] NULL, Default, datatype
        2. 개체 무결성 제약조건(기본키 제약)
            - 기본 키는 NULL값을 가져서는 안되고, relation내에 오직 하나의 값만 존재해야함 -> 제약대상: 튜플
        3. 참조 무결성(외래키 제약)
            - NULL값 허용한다
            - 자식 릴레이션의 외래키는 부모 릴레이션의 기본키의 도메인과 동일해야함 -> 제약대상: 튜플+속성
            - 부모 릴레이션이 바뀌면 자식 릴레이션의 외래키도 바뀜 [반대도 성립?]
            - 옵션: CASCADE, RESTRICTED, DEFAULT, NULL
* 관계 데이터 언어 = **관계 대수 + 관계 해석**

    **관계 대수와 관계해석의 표현력은 동등하다**
    1. 관계 대수
        + 정의: 절차적인 언어(how) + DBMS 내부의 처리 언어로 사용 + 연산자와 연산규칙 제공(피연산자, 결과 = 모두 릴레이션)
        + 종류:
            
                a. 순수관계 연산자 : 관계 데이터베이스 모델을 위해 고안된 연산자
                    종류 = 셀렉트(σ), 프로젝트(π), 조인(⋈), 디비전(÷)
                    * 디비전: R÷K => K릴레이션의 모든 조건을 만족하는 경우의 튜플들을 릴레이션 R에서 구함
                
                b. 일반 집합 연산자 : 수학적 집합 이론을 사용해 튜플의 집합에 적용.
                    조건: 합집합, 교집합, 차집합은 합병 조건(두 릴레이션 간 속성의 수와 도메인이 일치)을 만족해야한다
                    종류 = 교집합, 합집합, 차집합, 곱집합(cartesian product), 배정(assignment)
        + 한계: 산술 연산 불가, 정렬 불가, DB 수정 불가, 집단 함수 지원 X
        
    2. 관계 해석
        + 정의: 수학의 술어해석(predicate calculus) 기반, 비 절차적 언어(what), 관계 데이터의 연산 표현, 선언적 언어(원하는 데이터만 명시, 질의는 명시x)
        + 종류:
        
                a. 튜플 관계해석 : 원하는 릴레이션을 튜플 해석식으로 정의, 대표적인 언어=QUEL
                    - 식(Formula): 원자들로 이루어진다, and-or-not으로 원자들을 연결한다
                    - 튜플 변수: 튜플을 하나씩 그 값으로 취할 수 있는 변수, 범위 범수라 불린다.
                    - 한정 어트리뷰트: 릴레이션 R에 대해 튜플 변수 t가 나타나는 튜플의 어떤 어트리뷰트 A의 값
                    - 원자식: 범위식(ex_ R(t)), 조건식(t.num = 200)
                    - 정형식(Well-Formed Formula): AND, OR, NOT, 정량자(전칭 정량자-∀t , 존재 정량자-∃t)
                        * 전칭 정량자: 모든 가능한 튜플 t에 대해 정형식 F(t)가 모두 참이여야 참
                        * 존재 정량자: 참으로 만드는 어떤 튜플 t가 하나라도 존재 하면 F(t)는 참
                        * 자유 변수(전칭/존재 정량자 사용 X), 속박 변수(전칭/존재 정량자 사용 O)
                 
                 b. 도메인 관계 해석: 튜플 변수 대신 도메인 변수 사용(속성 중심), 대표적인 언어=QBE(QUERY BY EXAMPLE)
                     * 표현 식은 튜플 관계 해석에서 튜플대신 도메인 쓴다
        
* 시스템 카탈로그
    - 정의: 시스템 그 자체와 관련 있는 다양한 **객체에 관한 정보(정의 or 명세) = metadata**를 포함하는 시스템 DB
    - 특징: 카탈로그 임의로 갱신 불가(DBMS가 자동 갱신), 시스템 테이블로 되어 있음, 
    - 데이터 디렉터리: 데이터 딕셔너리(데이터 사전)이 위치한 곳
    - 데이터 사전: DB에 포함되는 모든 객체들에 관한 정의나 명세=metadata로 유지-관리되는 곳 의미

----------
##### 데이터 모델링 및 설계
* 데이터 모델: 현실 세계의 복잡한 개념 -> 단순화&추상화 -> 데이터베이스화
    - 데이터 모델 과정: 요구사항 수집 및 분석 -> 설계(개념적 모델링 => 논리적 모델링 => 물리적 모델링) -> 데이터베이스 구현
        1. 개념적 데이터 모델=정보 모델         **(ER다이어 그램) 이용**
            - 요구사항을 토대로 현실 세계에 대한 인식을 추상적 개념으로 표현
            - 핵심 엔티티 도출
        2. 논리적 데이터 모델  **관계형, 계층형, 네트워크형 모델 사용**
            - 비지니스 정보의 구조와 규칙을 명확히 표현(DB 설계 프로세스의 기초 설계 단계)
            - 데이터 모델링이 최종적으로 완료된 상태
            - ER 다이어그램을 사용하려는 DBMS에 맞게 사상(mapping)한다.
            - 정규화, 상세 속성 추출, 데이터 표준화 진행
        3. 물리적 데이터 모델 **DB 개체정의, DB 테이블/인덱스 정의**
            - 논리적 모델을 실제 컴퓨터의 저장장치에 저장하기 위한 물리적 구조 정의
    - 데이터 모델의 표시할 구성요소
        1. 구조: 논리적으로 표현된 개체 타입들 간의 관계로 데이터 구조 및 정적 성질 표현
        2. 연산: 데이터베이스를 조작하는 도구
        3. 제약조건: DB에 저장할 실제 데이터의 논리적인 제약조건
    - 데이터 모델의 기본 구성요소
        1. 개체: 데이터베이스에 표현하려는 것(현실 세계 대상체), 파일 시스템의 레코드에 대응(정보를 제공하는 역할)
            * 개체 타입: 반드시 속성이 하나 이상 있어야함, 관계가 하나 이상 있어야함
        2. 속성: 데이터의 가장 작은 논리적 단위, 개체를 구성하는 항목
        3. 관계: 개체 간의 관계, 속성간의 관계, 개체-속성 간의 관계

* 개체-관계[E-R 모델] **피터 첸이 제안함**
    - 세상의 사물을 개체-개체 관계로 표현
    - 데이터를 개체, 관계, 속성으로 묘사
    * ER 다이어그램 기호
    
        |기호|의미
        |---:|---:|
        |사각형|개체 타입|
        |마름모|관계|
        |타원|속성|
        |밑줄 타원|기본키|
        |복수 타원|복합 속성|
        |선|개체타입-속성 연결|
* 논리적 데이터 모델링
    - ER 다이어 그램 -> mapping -> 논리적 DB 설계
    
        |개념적 모델링|논리적 모델링
        |---:|---:|
        |entity|table|
        |attribute|column|
        |UID|Primary key|
        |Relationship|Foregin Key|
        |Mandantory|NOT NULL|
        |Optional|NULL|
    - 종류
        1. 관계 데이터 모델(RDM)
            - 계층 모델, 망 모델 보다 단순하다
            - **표(TABLE)** 을 이용하여 데이터 상호관계 정의 (모든 데이터를 논리적 구성함)
            - 선언적 질의어 사용(WHAT)
            - 높은 데이터의 독립성 제공 목적
        2. 계층 데이터 모델
            - **트리**를 이용한 데이터 모델 (레코드 타입들은 상하위 레벨 관계 성립, 사이클 없음 -> 레코드 삭제 시 연쇄 삭제됨)
            - 부모-자식 관계: 1:N관계의 두 레코드 타입
            - 개체를 세그먼트라 부름
            - 대표적인 DBMS=IMS
        3. 네트워크 데이터 모델
            - **네트워크 그래프** 를 이용한 데이터 모델
            - 오너와 멤버 관계: 1:N 관계만 가능(M:N은 표현 불가능)
            - 구조 복잡 -> 삭제,삽입,수정,검색 어려움
            - CODASYL DBTL 모델이라 불림
* 정규화
    - 개념: 이상이 있는(데이터 중복 있는) 관계를 재구성하여 무결성 향상
    - 필요성: 저장공간 최소화, 자료의 불일치 최소화, 자료구조 안정화, 이상 현상 방지
    - OLTP(CRUD 사용) -> 정규화 대상, OLAP(분석과 리포팅) -> 반정규화 대상

* 논리 데이터 모델 품질 검증
    - 좋은 데이터 모델: 완전성, 중복 배제, **비지니스 룰** (매우 중요한 요건으로 업무 규칙을 데이터 모델로 표현), 데이터 재사용, 안정성 및 확장성, 간결성, 의사소통,
    통합성 
